{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'user_profile_content.css' %}"/>
{% endblock %}

{% block content %}
<div class="profile-header">
    <div class="profile-img">
        <img src="/media/avatars/{{ profile.avatar }}" alt="avatar"/>
    </div>

    <div class="profile-details">
        <div class="profile-username"> {{ profile.user }} </div>
        <div class="profile-rank">
            <svg fill="#FFD60A" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px" height="20px" viewBox="0 0 163.725 163.725" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <polygon points="102.127,0 81.862,27.023 61.598,0 22.627,0 81.862,78.982 141.098,0 "></polygon> <path d="M81.862,78.982c-23.407,0-42.375,18.967-42.375,42.374c0,23.4,18.968,42.368,42.375,42.368 c23.4,0,42.374-18.968,42.374-42.368C124.236,97.949,105.263,78.982,81.862,78.982z M97.14,144.885l-15.277-8.037l-15.277,8.037 l2.913-17.031l-12.37-12.051l17.089-2.49l7.645-15.484l7.648,15.484l17.092,2.49l-12.367,12.051L97.14,144.885z"></path> </g> </g> </g></svg>
            Ranked #
        </div>
        <div class="profile-ff">
            <strong> {{ profile.following }} </strong> Following  |  <strong> {{ profile.followers }} </strong> Followers
        </div>
    </div>

    <div class="profile-btn">
        <form method="POST" action="">
            {% csrf_token %}
            <button type="button" data-bs-toggle="modal" data-bs-target="#editprofile">
                <svg width="20px" height="20px" viewBox="0 -0.5 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>edit [#1479]</title> <desc>Created with Sketch.</desc> <defs> </defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Dribbble-Light-Preview" transform="translate(-99.000000, -400.000000)" fill="#80699F"> <g id="icons" transform="translate(56.000000, 160.000000)"> <path d="M61.9,258.010643 L45.1,258.010643 L45.1,242.095788 L53.5,242.095788 L53.5,240.106431 L43,240.106431 L43,260 L64,260 L64,250.053215 L61.9,250.053215 L61.9,258.010643 Z M49.3,249.949769 L59.63095,240 L64,244.114985 L53.3341,254.031929 L49.3,254.031929 L49.3,249.949769 Z" id="edit-[#1479]"> </path> </g> </g> </g> </g></svg>
                Edit Profile
            </button>
        </form>
    </div>

    <div class="profile-btn">
        <form method="POST" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit">
                <svg fill="#80699F" width="20px" height="20px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" stroke="#80699F"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><title>ionicons-v5-o</title><path d="M160,256a16,16,0,0,1,16-16H320V136c0-32-33.79-56-64-56H104a56.06,56.06,0,0,0-56,56V376a56.06,56.06,0,0,0,56,56H264a56.06,56.06,0,0,0,56-56V272H176A16,16,0,0,1,160,256Z"></path><path d="M459.31,244.69l-80-80a16,16,0,0,0-22.62,22.62L409.37,240H320v32h89.37l-52.68,52.69a16,16,0,1,0,22.62,22.62l80-80a16,16,0,0,0,0-22.62Z"></path></g></svg>
                Log Out
            </button>
        </form>
    </div>
</div>

<div class="total-pets">
    <div class="total-pets-header">
        <div> Total Pets </div>

        <div class="pets-rarity">
            <div>
                <svg width="15px" height="15px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="8" cy="8" r="8" fill="#CDCDCD"></circle> </g></svg>
                Common
            </div>
            <div>
                <svg width="15px" height="15px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="8" cy="8" r="8" fill="#00DD0F"></circle> </g></svg>
                Uncommon
            </div>
            <div>
                <svg width="15px" height="15px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="8" cy="8" r="8" fill="#1699D2"></circle> </g></svg>
                Rare
            </div>
            <div>
                <svg width="15px" height="15px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <circle cx="8" cy="8" r="8" fill="#FFD60A"></circle> </g></svg>
                Mythical
            </div>
        </div>
    </div>

    <div class="pets-ctr">
        {{ total_pets }}
    </div>

    <div class="pets-bar">
        <div style="background-color: #CDCDCD; width: {{ rarity_bar.common }}%;"></div>
        <div style="background-color: #00DD0F; width: {{ rarity_bar.uncommon }}%;"></div>
        <div style="background-color: #1699D2; width: {{ rarity_bar.rare }}%;"></div>
        <div style="background-color: #FFD60A; width: {{ rarity_bar.mythical }}%;"></div>
    </div>
</div>


<div class="pet-showcase">
    <div class="pet-showcase-header">
        <div class="psh">
            <svg width="20px" height="20px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" class="bi bi-clock-history" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"></path> <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"></path> <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"></path> </g></svg>
        </div>

        <div class="psh"> Pet Showcase </div>

        <div class="psh">
            <svg fill="#ffffff" width="30px" height="30px" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path class="st0" d="M12 25l3 3 15-15-3-3-15 15zM11 26l3 3-4 1z"></path></g></svg>
            Edit
        </div>
    </div>
</div>


<!-- Edit profile modal -->
<div class="modal fade" id="editprofile" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Edit Profile</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form id="editProfileForm" method="POST" action="{% url 'edit_profile' %}">
                    {% csrf_token %}
                    <div class="mb-3" style="display: flex; align-items: center;">
                        <img src="/media/avatars/{{ profile.avatar }}" id="pet_image" class="img-thumbnail" style="width: 100px; height: 100px; border-radius: 50px; margin-right: 20px;" alt="Pet Photo">
                        
                        <div>
                            <label for="inventory_id" class="form-label"> Choose Avatar </label>
                            <select>
                                <option style="background-image:url(/media/avatars/avatar2.png);"></option>
                            </select>
                            <select class="form-select" id="inventory_id" name="inventory_id">
                                <option value="" disabled selected> Select an avatar </option>
                                
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="first_name" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="first_name" name="first_name" value="{{ profile.first_name }}" required>
                    </div>

                    <div class="mb-3">
                        <label for="last_name" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="last_name" name="last_name" value="{{ profile.last_name }}" required>
                    </div>

                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" name="username" value="{{ profile.user.username }}" required>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger"> Delete Account</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Delete account modal -->
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm Deletion</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete your account? This action cannot be undone.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirmDelete">Yes, Delete My Account</button>
        </div>
      </div>
    </div>
</div>

{% endblock %}